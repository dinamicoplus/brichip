TARGET=@PACKAGE_NAME@
VERSION=@PACKAGE_VERSION@
HOST=@HOST@
srcdir=@srcdir@
CFLAGS=@CFLAGS@
LDFLAGS=@LDFLAGS@
INCLUDES=@INCLUDES@
LIBS=@LIBS@
OUTPUT_FORMAT=@OUTPUT_FORMAT@
EXECUTABLE_NAME=$(TARGET)-$(VERSION)$(OUTPUT_FORMAT)

all:
	test -d bin || mkdir bin
	gcc $(CFLAGS) $(INCLUDES) -o bin/$(EXECUTABLE_NAME) $(srcdir)/src/SDLm.c $(srcdir)/src/chip8.c $(LIBS) $(LDFLAGS)

clean:
	rm -r bin
createapp: all
	test -d bin/$(EXECUTABLE_NAME).app || mkdir bin/$(EXECUTABLE_NAME).app
	mv bin/$(EXECUTABLE_NAME) bin/$(EXECUTABLE_NAME).app
	cp -R $(srcdir)/src/macosx/SDLMain.nib bin/$(EXECUTABLE_NAME).app
	cp $(srcdir)/src/macosx/Info.plist bin/$(EXECUTABLE_NAME).app 